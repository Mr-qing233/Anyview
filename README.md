# Anyview

# **一、项目题目**

## 可能要用到的技术

- 了解Java，了解Spring，SpringMVC，Mybatis框架，了解并会使用SpringBoot框架

- 了解mysql，

- 了解lombok，jwt

- websocket，不要使用stomp实现，可以使用原生或springboot封装的

- 其他可使用任意依赖

- 了解HTML、CSS、JavaScript，了解Ajax等，前后端通信

- ... 还需要什么捏？

已经学习了框架知识的尽量实现多点需求，可以提前提交考核

没有学习web、框架知识的先学习，考核结果将考虑学习速度

- ## 项目需求

- - 

  -  实现**课堂实时测验功能**

  -   **1.****测验****整体流程**  （1）测验名称列：点击测验名称时，如果测验处于“未开始”状态，进入“修改测验编排”页面；否则进入“查看测验编排”页面。 （2）如果一个测验刚刚结束，则测验状态变为“已结束”，操作变为“批改”，测验名称不再可点击，题目栏变为“查看”。 （3）测验状态列和操作列：测验状态决定了当前可用的操作，见下表：

  - | 测验状态 | 可用的操作 |
    | -------- | ---------- |
    | 未开始   | 准备       |
    | 准备     | 开始；结束 |
    | 进行中   | 结束；延时 |
    | 已结束   | 批改       |

  -  各种操作的具体设计：

  - | 操作 | 具体设计                                                     |
    | ---- | ------------------------------------------------------------ |
    | 准备 | 教师端弹出一个带可输入多少分钟后自动开始测验的确认/取消框。用户输入分钟数并确认后，测验表可用，通知学生进入/强制跳转至测验表界面。（且所设置的班级的考试时间不可以冲突（某个班级在一个时间段有测验，不允许这个时间段有其他测验，要提示用户）。） |
    | 开始 | 通知学生端的测验表界面中的“操作”列所有按钮变为可用；更新学生端的测验表界面中的“开始时间”和“当前状态”；倒计时开始。（用户如果手动点开始，则所设置的班级的考试时间不可以冲突（某个班级在一个时间段有测验，不允许这个时间段有其他测验，要提示用户）。 |
    | 结束 | 教师端弹出一个确认框。教师点击确认后，通知学生端保存所有学生的代码，并跳转出测验表界面。 |
    | 延时 | 教师端弹出一个带可输入延时多少分钟的确认/取消框。用户输入延时分钟并确认后，更新学生端的测验表界面和做题界面中的倒计时。（需检查延时之后的时间会不会影响该班级其他测验的时间，如果影响要提示用户重新设置延时时间） |

  -  注意： 1）以上各种操作均是指教师手动进行的操作。在添加/修改测验表界面，可以为各个阶段设置定时自动发生模式，无需人工干预。 2）测验进行流程如下图所示： **注意：** （1）测验状态的更新及推送需利用WebSocket技术后端主动推送消息。 （2）测验时间校验可用任务轮询数据库更新已进行时间（如每10~30秒更新一次），并校验测验状态是否改变（消息推送）。 （3）学生页面只要求有登陆页面，或自行添加登录后查看往期测验页面，测验做题页面和主页面配合消息接收消息推送后页面的跳转

  - 

  - 

  -  **2.添加测验编排** （1）允许选择多个班。 （2）用户可以先事先建好一张或多张测验题目表 （3）“测验题目表”旁边新增一个按钮：新建。点击该“新建”按钮，进入“3. 添加测验题目表”界面。 （4）如果开始方式为自动，要设置 “准备开始时间”和“测验开始时间”。测验开始时间必须晚于准备开始时间，**且所设置的班级的考试时间不可以冲突（某个班级在一个时间段有测验，不允许这个时间段有其他测验，要提示用户）。** （4）点击“返回”，则不保存用户的任何输入，返回“1. 主页面”页面。

  -   **3. 添加测验题目表** **选择题库（能用就行）** （1）列出该用户可以看到的所有题库 （2）点击“题库”列下的任意题库名称，进入该题库下所有的“5. 题目列表”页面。 （3）点击“返回”，则不保存用户的任何设置，返回“添加测验编排”页面。 **题目列表** **注意：** （1）用户可以同时选择多道题目。 （2）点击确定时，保存用户的选择返回“添加测验题目表”页面；点击返回时，不保存用户的选择返回“选择题库”页面。 

  -   **4.修改测验编排** 在“主页面”中选择某测验，并点击测验按钮时，跳转至本页面；或者点击某测验名称时，也跳转至本页面。本页面与“2添加测验编排”页面高度类似。 

  -   **修改测验题目表页面** 注：若题目表名称未被修改，则更新测验题目表，否则直接新建一张测验题目表 在更新测验题目表时，注意，测验题目表的题目的更新，及测验表题目的删除和新增

  -   **5.查看测验编排** （1）所有字段为只读。 （2）点击“题目名称”可以弹出该题目的内容。
  
  -  【必要】： 1.班级，学生管理（测验添加需要班级，学生关系）。 2.新增学校，学院，课程，（教师与班级通过课程联系起来） 注：时间有限第2点可先直接在数据库先填数据，测验添加时能够查询出相关数据关联上即可，先实现测验整体功能为主。 3. 测验模块，websocket（尽量尽量尽量实现集群式）。如果http实现的话，集群可加分。
  
  -  **实现成可集群式，不能简单用对象存储状态，此处不懂的可以询问师兄**  【非必要（实现更佳）】： 新增管理员角色，管理员可对学校，学院，教师，课程，班级，学生进行管理。 注： 1.包括简单增、删、改、查； 2.教师，课程，班级关系修改（一门课程可对应多个班级，一个班级能有多个课程，一位老师可教多门课程），三者都是多对多

## 额外需求（不必要）

### 部署项目到linux服务器上

- 有能力的购买云服务器(腾讯云、阿里云等，使用学生认证好像更便宜)

- 没能力的安装linux虚拟机部署到本地虚拟机

- 有能力可以学习使用docker容器部署

#### 部署项目需要的技术栈

- linux基础

- shell命令

- docker

## 代码规范

- 尽量多使用设计模式、注意代码质量、代码优雅性

- 考虑其他人看你的代码的感受，在有你自己思考的代码的地方最好都要有注释

- 考虑重复代码抽象出来，尽量不要让IDEA报重复代码的warn

- **git规范****为重中之重，git commit的规范，git分支使用规范**

- 不能简单实现功能，要预料需求添加后如何易于修改已有的代码

- **mybatics使用****xml****格式书写，允许使用mybatics注解和mybatics-plus对应工具类（推荐****使用****mybatics-plus的idea插件）**

- **严格使用****lambok的@slf4j****进行****打印日志**

- **尽量****完成****接口文档****的编写**

## 项目提交

- 提交内容：**数据库sql文件，代码**

- 提交方式：采用Git进行提交，将仓库地址告知师兄

- 考核过程中只能在 master 分支合并 3次代码，前2次会有反馈，最后一次没有，多交的按照第3次提交的而为准。每次提交需通知对应方向师兄。

- 自己的代码可以提交到 dev 分支，需要发布正式版时通过提交合并请求（Pull Request）合并到 master分支 （master 需要保护，不允许直接 push）

- Git 提交的粒度要足够小（原则上每次 commit 不超过 200 行，要求在 Pull Request 中看到的每个 commit 都是细粒度的），比如每完成一个功能或修复一个 bug 尽量都进行提交

## 分包

- com.yourname.www.po（与数据库表一一对应的实体类）

- com.yourname.www.util（工具类，与业务逻辑无关，通常为各个项目都可以通用的代码）

- com.yourname.www.dao（放置数据库或文件读写相关的代码）

- com.yourname.www.service（放置处理业务逻辑的代码，隔离dao层与controller层）

- com.yourname.www.controller（负责接受前端参数，分发请求） yourname 换成你的名字的拼音 

| 时间               |
| ------------------ |
| 开始时间：9月9日   |
| 结束时间：10月22日 |




# **二、项目分析**

# 1、项目流程

> 可视为以下阶段
> 	1.可行性分析
> 	2.需求分析
> 	3.概要设计
> 	4.详细设计
> 	5.实际编写
> 	6.测试

# 2、项目需求

> 1.课堂实时测验功能
> 表单格式:名称-状态-操作[0:准备,1:开始|结束,2:结束|延时,3:批改]
>
> | 测验状态 | 可用的操作 |
> | -------- | ---------- |
> | 未开始0  | 准备       |
> | 准备1    | 开始；结束 |
> | 进行中2  | 结束；延时 |
> | 已结束3  | 批改       |
>
> | 操作 | 具体设计                                                     |
> | ---- | ------------------------------------------------------------ |
> | 准备 | 教师端弹出一个带可输入多少分钟后自动开始测验的确认/取消框。用户输入分钟数并确认后，测验表可用，通知学生进入/强制跳转至测验表界面。（且所设置的班级的考试时间不可以冲突（某个班级在一个时间段有测验，不允许这个时间段有其他测验，要提示用户）。） |
> | 开始 | 通知学生端的测验表界面中的“操作”列所有按钮变为可用；更新学生端的测验表界面中的“开始时间”和“当前状态”；倒计时开始。（用户如果手动点开始，则所设置的班级的考试时间不可以冲突（某个班级在一个时间段有测验，不允许这个时间段有其他测验，要提示用户）。 |
> | 结束 | 教师端弹出一个确认框。教师点击确认后，通知学生端保存所有学生的代码，并跳转出测验表界面。 |
> | 延时 | 教师端弹出一个带可输入延时多少分钟的确认/取消框。用户输入延时分钟并确认后，更新学生端的测验表界面和做题界面中的倒计时。（需检查延时之后的时间会不会影响该班级其他测验的时间，如果影响要提示用户重新设置延时时间） |
>
> 2.添加测验编排
> 	1.允许选择多个班
> 	2.选择题目表
> 	3.新建题目跳转页面
> 	4.返回主界面
>
> 3.添加测验题目表、选择题库
> 	1.展示所有题库
> 	2.点击查看题目题目列表
> 	3.返回测验编排页面
>
> > 1、用户可以同时选择多道题目。2、点击确定时，保存用户的选择返回“添加测验题目表”页面；点击返回时，不保存用户的选择返回“选择题库”页面。 
>
> 4.修改测验编排
>
> 5.查看测验编排
>
> 6.班级、学生管理
>
> 7.新增学校、学院、课程

# 3、项目研发

> 1.数据库设计
> 2.前端页面模板
> 3.项目整体框架搭建[两种方式，主要使用3.1]
> 	3.1独立业务模块
> 	3.2独立代码层次
> 4.业务功能开发
> 	Apifox测试

## 3.1、数据库设计

> 管理员cardId:6位[100000起始]
>
> 老师cardId:8位[10000000起始]
>
> 学生cardId:10位[1000000000起始]

## 3.2、前端页面

1. 学生端

   > 登录页
   > 选择测验页
   > 测验中页

2. 教师端

   > 实时测验页
   > 测验编排页
   > 查看测验编排页
   > 修改编排页
   > 添加测验题目表|选择题库[组卷]

3. 管理员端[暂且搁置]

   > 学校学院等数据库信息管理

# 4、数据库建表

> 本地数据库登录:
> mysql -uroot -p
> root
>
> 数据库结构查看:
> select column_name,column_type,is_nullable,column_default,column_comment from information_schema.columns where table_schema='preface' and table_name='表名';
>
> 数据库建表语句查看:
> SHOW CREATE TABLE 表名;

## 4.1 管理员表

| Field      | Type              | Comment    |
| ---------- | ----------------- | ---------- |
| adminId    | int NOT NULL      | 管理员id   |
| adminName  | char(30) NOT NULL | 管理员名字 |
| cardId     | int NOT NULL      | 账号       |
| pwd        | char(20) NOT NULL | 密码       |
| permission | int NOT NULL      | 管理员权限 |

## 4.2 学生表

| Field       | Type              | Comment  |
| ----------- | ----------------- | -------- |
| studentIde  | int NOT NULL      | 学生id   |
| studentName | char(10) NOT NULL | 学生姓名 |
| grade       | int NOT NULL      | 学生年级 |
| institue    | char(20) NOT NULL | 学院     |
| major       | char(20) NOT NULL | 专业     |
| class       | int NOT NULL      | 班级     |
| cardId      | int NOT NULL      | 账号     |
| pwd         | char(20) NOT NULL | 密码     |
| sex         | char(2) NOT NULL  | 性别     |
| permission  | int NOT NULL      | 权限     |

## 4.3 老师表

| Field       | Type              | Comment  |
| ----------- | ----------------- | -------- |
| teacherId   | int NOT NULL      | 老师id   |
| teacherName | char(10) NOT NULL | 老师名字 |
| institute   | char(20) NOT NULL | 学院     |
| course      | char(20) NOT NULL | 课程     |
| cardId      | int NOT NULL      | 账号     |
| pwd         | char(20) NOT NULL | 密码     |
| permission  | int NOT NULL      | 权限     |

## 4.4 各题目表

## 4.5 测验编排表

## 4.6 题库表







# 5、项目规划

>1:前端vue:localhost:8080
>
>2:后端springboot:localhost:8081
>
>3:数据库mysql:localhost:3306
>
>4:分包:
>
>- com.qing.www.po（与数据库表一一对应的实体类）
>
>- com.qing.www.util（工具类，与业务逻辑无关，通常为各个项目都可以通用的代码）
>
>- com.qing.www.dao（放置数据库或文件读写相关的代码）
>
>- com.qing.www.service（放置处理业务逻辑的代码，隔离dao层与controller层）
>
>- com.qing.www.controller（负责接受前端参数，分发请求） yourname 换成你的名字的拼音 
